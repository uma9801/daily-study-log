# pandas
## Series型で複数の値を参照する（追加）
- `Series名[インデックス:インデックス]`でスライスを用いた参照ができる。  
- 間違いやすい違い：インデックスのリストを用いた参照は`Series名[[インデックス, インデックス]]`となり、[]が1つ多い。  
## CSVファイルのデータ読み込み方法
- csvファイル（値ごとに`,`で区切ってデータを並べた形式）を読み込んでDataFrameを作成することがよくある。  
- **csvファイルの注意点**：`,`の前後に空白（スペース）があると空白まで読み込まれて参照が意図どおにできなくなる。  
- 読み込みコマンド`pd.read_csv(ファイルパス)`  
```python
# マイドライブから読み込むコード例
from google.colab import drive
drive.mount('/content/drive')
df_4 = pd.read_csv('/content/drive/My Drive/pd_data.csv')
df_4
```
## データの取得方法
- `DataFrame名.loc[行名, 列名]`で参照できる。  
- リストやスライスでの複数指定も可能。  
	- リスト（飛び飛び指定可能）：`loc[[行名, 行名], [列名, 列名]]`[ ]の数注意。  
	- スライス：`loc[行名:行名, 列名:列名]`  
	- iloc：`DataFrame名.iloc[[行番号のリストorスライス], [列番号のリストorスライス]]`といった名前ではなく番号での指定も可能。  
- 抽出された値は、`出力結果：np.int64(36)`のように、NumPyで扱われるデータ型（int64やfloat64：64は64ビットを表す）となる。  
	- np.int64はPython標準の`int`に近いが、以下ような特性がある。  
	- pandasはNumPy基準で構築されており、扱われる値もNumPy基準となっている。  
	- NumPyの配列（ndarray）はC言語に最適化されており、遥かに高速に大量の数値計算処理が可能。   
	- その配列の要素を定義するデータ型が`int64, uint64, float64`など。  
- `DataFrame名[行名の条件式]`で条件に合った列を参照できる。
	- 例：`df_2['数学' >= 30]`数学カラムで30以上の値を持っていればTrue  
	- さらに、DataFrame名[]に上記の参照条件コードを入れ込み  
	- `DataFrame名[DataFrame名[行名] 条件式]`  
		- 例：`df_2[df_2['数学'] > 30]`  
	- とすることで、条件がTrueになる列のみを抽出できる。（行は全表示）  
	- そして`loc`を使うことで、そこから更に表示する行を絞れる。（条件で参照した部分が列に当たる）  
	- `DataFrame名.loc[DataFrame名[行名] 条件式], 行名のリスト]`  
		- 例：`df_2.loc[df_2['数学'] > 90, ['数学', '国語', '理科']]`  
		- 数学が90より大きい列の数学・国語・理科を抽出。  
## 行・列の追加方法
-　`DataFrame名[追加する列名] = 値`で新たな列を最後尾に追加。  
	- 数字や文字列だと全て同じ値が入る。  
	- Seriesやリストで値を入れれば上の行から順に値が入る。  
- locを加え`DataFrame名.loc[追加する行名] = 値`で新たな行を最後尾に追加。  
	- 値の扱いは行の追加と同じ。（Seriesやリストでは左の列から値が入る）  
## 統計量の算出
- 統計量は以下のメソッドで測れる。  
	- max: 最大値  
	- min: 最小値  
	- mean: 平均値  
	- std: 標準偏差  
- Seriesでは各値の、DataFrameでは各行についての統計量を測れる。  
- Series：`Series名.メソッド()`  
- DataFrame：`DataFrame名.メソッド()`や`DataFrame名[列名].メソッド()`  
- 要約統計量の算出  
	- Series：`Series名.describe()`  
	- DataFrame：`DataFrame名.describe()`  
- 相関係数の算出(correlation)  
	- `DataFrame名.corr()`  各列間の相関係数を算出できる。  
	- 正の相関は比例、負の相関は反比例。  
	- 相関係数の絶対値は関係の強弱を表し、(-)1に近づくほどデータの分布が(反)比例するということ。  
## テーブルの結合方法
- 縦に結合`pd.concat(結合したいDataFrameのリスト)`
	- 横に結合する場合は`pd.merge()`を使うのが一般的。
	- 値が含まれない個所はNaN（欠損値）になる。
	- 引数`join`で`join=inner`を指定すると、選択した全てのDataFrameで共通した列のみが結合される。
		- 例：`pd.concat([df_2, df_4], join=inner)`
		- 結合に使われなかった列は削除される。
	- `join=outer`は無指定と同じで全ての列を結合する。
- 横に結合`pd.merge(DataFrame名, DataFrame名)`
	- concatと違い、**DataFrameのリスト**が引数になるのではない点に注意。
	- 第一引数の横に第二引数のDataFrameが結合される。
	- 共通のキーとする行名を`on`で指定する。  
		- `pd.merge(DataFrame名, DataFrame名, on=列名)`
		- 例：`pd.merge(df_2, df_4, on="名前")`
		- **キーで指定した列における、両DataFrameに共通する値がある行**のみで結合され、その他の行は削除される。