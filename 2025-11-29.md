#Numpy #python 
# NumPy
## 配列の統計量計算方法
`ndarray.メソッド名`
max, min, mean, std, sum: 最大、最小、平均、標準偏差、合計
`axis`
.max(axis=0): 縦軸ごとの最大値
.max(axis=1): 横軸ごとの最大値
その他の統計量メソッドも同様に使える。
### 標準偏差(s)
- 標準偏差とは
	- 標準は分散の平方根
		- 分散は
			- 平均値を出す
			- 各サンプルに対して平均値を引いて2乗し、それらを足し合わせてサンプル数で割る
		- 分散の平方根を取って標準偏差を出す
	- 標準偏差と分散は、データのばらつき具合を出すという意味で同じ
	- 分散は、2乗の計算が入るので値が大きくなり、サンプルデータとスケールが違い分かり難い
	- 標準偏差は分散の平方根を取るので**サンプルデータのスケールに近い**
	- つまり直感的に分かり易い
		- 「平均値に対して、±sのばらつきがあるんだ」という具合
		- テストの点数の標準偏差で例を挙げれば
			- 平均点±19.3点の範囲におおよその人が含まれているのだなと理解することができる
	- 標準偏差の値は、基データのスケールに合わせて決まるので、これといった定型の範囲はない
投資におけるリスクと同じ意味。
- 大きいほどブレ幅が広い（平均値からのばらつきが多い）
- 小さいほどブレ幅が狭い（平均値からのばらつきが少ない）
#### 偏差値
偏差値は、平均値を50・標準偏差を10として、そこに観測したデータを比較した値
- `偏差値 = (得点 - 平均点) / 標準偏差 * 10 + 50`
- `(得点 - 平均点) / 標準偏差`：正規分布の標準化
- 観測したデータ群の数が少ない場合は偏差値に適さない
	- 偏差値は、観測したデータ群が正規分布に従うと仮定している
	- **「世の中のデータは標本数が増えると正規分布に従う**」という性質を利用している
	- 観測したデータ数が少ない場合は、正規分布に従うと仮定できず偏差値の定義が覆ってしまう
- 個別のデータが平均と同じなら50
- 偏差値40～60に全体の約68％が含まれる（正規分布に基く）
- 標準偏差の境界値となる60なら全体の上位約16%に位置する
## 時間の扱い
### 日付の取得
`np.datetime64("today", "D")`今日の日付を取得
"W": 今週の木曜日の日付を取得（木曜基準になっているため）
"M", "Y": 月、年
`np.timedelta64(int, "D")`日付操作で使用
```python
today = np.datetime64("today", "D")
print(today) # 2025-11-29

tomorrow = today + np.timedelta64(1, "D")
print(tomorrow) # 2025-11-30

next_w = today + np.timedelta64(1, "W")
print(next_w) # 2025-12-06
```
`np.arange(日付ａ, 日付b, dtype=datetime[D])`
日付a～(b-1)間の日付配列を1日間隔で作成
- bは含まない
```python
april_days = np.arange("2025-04", "2025-05", dtype="datetime64[D]")
print(april_days)
```
実行結果
```
['2025-04-01' '2025-04-02' '2025-04-03' '2025-04-04' '2025-04-05' 
 '2025-04-06' '2025-04-07' '2025-04-08' '2025-04-09' '2025-04-10' 
 '2025-04-11' '2025-04-12' '2025-04-13' '2025-04-14' '2025-04-15' 
 '2025-04-16' '2025-04-17' '2025-04-18' '2025-04-19' '2025-04-20' 
 '2025-04-21' '2025-04-22' '2025-04-23' '2025-04-24' '2025-04-25' 
 '2025-04-26' '2025-04-27' '2025-04-28' '2025-04-29' '2025-04-30']
```
`np.is_busday()`営業日（デフォルトは平日）を判定しbool値配列を返す
- busはbusiness
`np.is_busday(april_days)`bool値配列
`april_days[np.is_busday(april_days)]`bool値配列による参照
### datetime64型
NumPyやPandasで日付と時刻（日時）を効率的に扱うための特殊なデータ型 
`datetime64`型の概要
- 目的: 日時データを数値として表現し、計算や比較を容易にする
	- 特に大規模な時系列データを扱う際に効率的
- 内部構造: 64ビットの整数として時間を格納しており、通常はナノ秒の精度を持つ
	- (`datetime64[ns]`
- 利点:
    - 日付や時刻の計算を高速に行うことができる
        - 例: 2つの日付の差分を求める、特定の日付範囲のデータを抽出するなど
    - 従来のPython標準の`datetime`オブジェクトよりもメモリ効率が良い場合がある
    - pandasでは、この型を利用して時系列データ特有の様々な操作が可能
        - 四半期、週番号の抽出、リサンプリングなど
- 用途: センサーデータのタイムスタンプ分析、金融データの時系列分析、ログデータの処理など、時間に関連するデータを扱う様々な場面で利用される
## 余談
もとでーた：元データ、基データ
元：元に戻る、元を取る、元大臣、元からやり直す。
- 元の概念に戻ってどうこうするイメージ
基：基礎、資料を基にする、国の基礎を築く。
- 基から発展させてどうこうするイメージ